# ZEGO AI 降噪功能测试指南 🧪

## 📋 测试前准备

### 1. 环境要求
- ✅ Chrome 66+ / Edge 79+ / Firefox 76+ / Safari 14.1+
- ✅ 移动端：Safari/Chrome 96+
- ✅ 麦克风和摄像头权限

### 2. 测试场景
准备以下测试环境：
- 🎹 有键盘的环境（办公室、家里）
- 🖱️ 有鼠标点击的环境
- 🗣️ 有背景噪音的环境（空调、风扇等）

## 🧪 测试步骤

### 测试 1: 基础功能测试

#### 步骤：
1. 打开浏览器控制台（F12）
2. 进入视频面试页面
3. 观察控制台日志

#### 预期结果：
```
📦 ZEGO SDK 加载完成，AI 降噪模块已就绪
🎯 尝试注册 AI 降噪模块...
✅ AI 降噪模块已注册
✅ ZEGO 引擎创建成功
✅ 创建本地流成功
✅ AI 降噪已启用 - 将自动消除键盘声、鼠标点击、咳嗽等噪音
```

#### 用户界面：
- 应该看到提示消息："AI 降噪已启用，通话音质更清晰 ✨"

---

### 测试 2: 键盘噪音消除测试

#### 步骤：
1. 开始视频通话
2. 在通话过程中敲击键盘
3. 询问对方是否能听到键盘声

#### 预期结果：
- ✅ 对方听不到或几乎听不到键盘声
- ✅ 语音清晰度不受影响

---

### 测试 3: 鼠标点击噪音消除测试

#### 步骤：
1. 开始视频通话
2. 在通话过程中频繁点击鼠标
3. 询问对方是否能听到鼠标点击声

#### 预期结果：
- ✅ 对方听不到或几乎听不到鼠标点击声
- ✅ 语音清晰度不受影响

---

### 测试 4: 背景噪音消除测试

#### 步骤：
1. 开始视频通话
2. 在有空调、风扇等背景噪音的环境中通话
3. 询问对方是否能听到背景噪音

#### 预期结果：
- ✅ 背景噪音明显减弱
- ✅ 语音清晰度提升

---

### 测试 5: 兼容性测试

#### 测试页面：
- [ ] `H5VideoRoom.tsx` (React 组件)
- [ ] `video-interview-host.html` (小程序主持人)
- [ ] `video-interview.html` (小程序访客)
- [ ] `video-interview-host.html` (前端公共主持人)
- [ ] `video-interview-guest-room.html` (前端公共访客)

#### 测试浏览器：
- [ ] Chrome (桌面)
- [ ] Safari (桌面)
- [ ] Chrome (移动端)
- [ ] Safari (移动端)
- [ ] 微信小程序 WebView

---

### 测试 6: 错误处理测试

#### 步骤：
1. 使用不支持 AI 降噪的旧版 SDK（如果有）
2. 观察控制台日志和用户界面

#### 预期结果：
```
ℹ️ 当前 SDK 版本不支持 AI 降噪功能
```
- ✅ 不应该有错误抛出
- ✅ 视频通话正常进行
- ✅ 不影响其他功能

---

### 测试 7: 性能测试

#### 步骤：
1. 开始视频通话
2. 打开浏览器任务管理器（Chrome: Shift+Esc）
3. 观察 CPU 和内存使用情况

#### 预期结果：
- ✅ CPU 使用率增加不超过 5%
- ✅ 内存使用增加不超过 10MB
- ✅ 音频延迟不超过 100ms

---

## 📊 测试报告模板

### 测试环境
- 浏览器：_____________
- 操作系统：_____________
- SDK 版本：_____________
- 测试日期：_____________

### 测试结果

| 测试项 | 结果 | 备注 |
|--------|------|------|
| 基础功能 | ✅/❌ | |
| 键盘噪音消除 | ✅/❌ | |
| 鼠标点击消除 | ✅/❌ | |
| 背景噪音消除 | ✅/❌ | |
| 兼容性 | ✅/❌ | |
| 错误处理 | ✅/❌ | |
| 性能影响 | ✅/❌ | |

### 问题记录
1. _____________
2. _____________
3. _____________

### 总体评价
- 功能完整性：⭐⭐⭐⭐⭐
- 用户体验：⭐⭐⭐⭐⭐
- 性能影响：⭐⭐⭐⭐⭐
- 稳定性：⭐⭐⭐⭐⭐

---

## 🐛 常见问题排查

### 问题 1: 控制台没有看到 AI 降噪相关日志
**可能原因：**
- SDK 版本过旧
- 浏览器不支持

**解决方案：**
- 检查 SDK 版本是否为最新
- 更换支持的浏览器

### 问题 2: AI 降噪启用失败
**可能原因：**
- 浏览器不支持
- 音频流创建失败

**解决方案：**
- 检查控制台错误信息
- 确认麦克风权限已授予

### 问题 3: 降噪效果不明显
**可能原因：**
- 噪音类型不在 AI 降噪范围内
- 噪音过大

**解决方案：**
- AI 降噪主要针对非稳态噪音（键盘、鼠标、咳嗽等）
- 对于持续性噪音（空调、风扇），效果可能有限

---

## 📞 技术支持

如有问题，请联系开发团队并提供：
1. 浏览器控制台完整日志
2. 测试环境信息
3. 问题复现步骤
4. 预期结果 vs 实际结果

