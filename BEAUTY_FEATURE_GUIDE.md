# 🎨 视频面试美颜功能使用指南

## 📋 功能概述

视频面试系统现已集成美颜功能，支持实时美颜效果调整，提升视频面试的视觉体验。

### ✨ 核心特性

- **实时美颜效果**：支持美白、磨皮、锐化、红润四大参数调整
- **权限控制**：房间创建者（HR）拥有完整的美颜控制权限
- **快速预设**：提供自然、标准、增强三种预设方案
- **多端支持**：PC端、移动端、小程序端全面支持
- **即时生效**：参数调整实时生效，无需重启

---

## 🎯 权限说明

### 房间创建者（HR）权限

✅ **完整控制权限**：
- 开启/关闭美颜效果
- 调整所有美颜参数
- 使用快速预设方案
- 实时预览效果

### 访客（求职者）权限

✅ **基础使用权限**：
- 可以使用 ZEGO 内置的美颜功能
- 通过音视频设置按钮访问
- 可以开启/关闭美颜
- 可以调整基础参数

❌ **限制**：
- 无法访问 HR 端的高级美颜控制面板
- 无法使用自定义预设方案

---

## 🚀 使用方法

### 方式一：HR 端自定义美颜控制（推荐）

#### 1. 进入视频面试房间

1. 登录 CRM 系统
2. 进入"视频面试"页面
3. 创建或加入房间

#### 2. 打开美颜设置面板

在视频面试界面，点击 **"🎨 美颜"** 按钮（位于顶部控制栏）

#### 3. 开启美颜效果

点击 **"开启"** 按钮，美颜效果立即生效

#### 4. 调整美颜参数

**美白（Whitening）**：0-100
- 0：自然肤色
- 50：中等美白
- 100：最强美白

**磨皮（Smoothing）**：0-100
- 0：保留皮肤纹理
- 50：中等磨皮
- 100：最强磨皮

**锐化（Sharpening）**：0-100
- 0：柔和效果
- 50：中等清晰度
- 100：最强清晰度

**红润（Rosiness）**：0-100
- 0：自然气色
- 50：中等红润
- 100：最强红润

#### 5. 使用快速预设

点击预设按钮快速应用：

- **自然**：美白30、磨皮40、锐化20、红润30
- **标准**：美白50、磨皮60、锐化30、红润40（默认推荐）
- **增强**：美白70、磨皮80、锐化40、红润60

---

### 方式二：ZEGO 内置美颜（所有用户）

#### 1. 进入视频面试房间

#### 2. 打开音视频设置

点击视频界面中的 **"设置"** 图标（齿轮图标）

#### 3. 选择美颜选项

在设置面板中找到"美颜"或"Beauty"选项

#### 4. 调整参数

根据 ZEGO 提供的界面调整美颜参数

---

## 🎨 美颜参数详解

### 美白（Whitening）

**作用**：提亮肤色，使皮肤看起来更白皙

**推荐值**：
- 日常面试：30-50
- 正式面试：40-60
- 特殊需求：60-80

**注意事项**：
- 过高会导致肤色不自然
- 建议配合红润参数使用

---

### 磨皮（Smoothing）

**作用**：平滑皮肤纹理，减少瑕疵

**推荐值**：
- 日常面试：40-60
- 正式面试：50-70
- 特殊需求：70-90

**注意事项**：
- 过高会导致面部细节丢失
- 建议配合锐化参数使用

---

### 锐化（Sharpening）

**作用**：增强画面清晰度，突出面部轮廓

**推荐值**：
- 日常面试：20-40
- 正式面试：30-50
- 特殊需求：40-60

**注意事项**：
- 过高会导致画面过于锐利
- 建议与磨皮参数平衡使用

---

### 红润（Rosiness）

**作用**：增加面部红润感，改善气色

**推荐值**：
- 日常面试：30-50
- 正式面试：40-60
- 特殊需求：50-70

**注意事项**：
- 过高会导致面部过红
- 建议配合美白参数使用

---

## 💡 最佳实践

### 场景一：日常视频面试

**推荐配置**：
```
美白：40
磨皮：50
锐化：30
红润：40
```

**适用场景**：
- 普通家政人员面试
- 日常沟通交流
- 非正式场合

---

### 场景二：正式视频面试

**推荐配置**：
```
美白：50
磨皮：60
锐化：30
红润：40
```

**适用场景**：
- 高端家政人员面试
- 重要客户面试
- 正式场合

---

### 场景三：特殊需求

**推荐配置**：
```
美白：60
磨皮：70
锐化：40
红润：50
```

**适用场景**：
- 特殊要求的面试
- 需要特别注重形象的场合
- 光线条件不佳的环境

---

## 🔧 技术实现

### 前端实现

**文件**：`frontend/src/pages/interview/VideoInterview.tsx`

**核心代码**：

```typescript
// 美颜状态管理
const [beautyEnabled, setBeautyEnabled] = useState(false);
const [beautyParams, setBeautyParams] = useState({
  whitening: 50,
  smoothing: 60,
  sharpening: 30,
  rosiness: 40
});

// 开启/关闭美颜
const toggleBeauty = () => {
  if (beautyEnabled) {
    zegoInstanceRef.current.setBeautyEffect(false);
  } else {
    zegoInstanceRef.current.setBeautyEffect(true, beautyParams);
  }
  setBeautyEnabled(!beautyEnabled);
};

// 调整美颜参数
const adjustBeautyParam = (param: string, value: number) => {
  const newParams = { ...beautyParams, [param]: value };
  setBeautyParams(newParams);
  
  if (beautyEnabled) {
    zegoInstanceRef.current.setBeautyEffect(true, newParams);
  }
};
```

### ZEGO 配置

```typescript
const config = {
  // ... 其他配置
  showAudioVideoSettingsButton: true, // 显示音视频设置按钮
  // 美颜功能通过音视频设置按钮访问
};
```

---

## 📱 多端支持

### PC 端（VideoInterview.tsx）

✅ **完整功能**：
- 自定义美颜控制面板
- 实时参数调整
- 快速预设方案
- ZEGO 内置美颜

### 移动端（JoinInterviewMobile.tsx）

✅ **基础功能**：
- ZEGO 内置美颜
- 通过设置按钮访问

### 访客端（JoinInterview.tsx）

✅ **基础功能**：
- ZEGO 内置美颜
- 通过设置按钮访问

---

## ⚠️ 注意事项

### 性能影响

- 美颜功能会增加 CPU 使用率（约 5-15%）
- 建议在性能较好的设备上使用
- 低端设备可能出现卡顿

### 网络影响

- 美颜不会增加网络带宽消耗
- 美颜处理在本地完成
- 不影响视频传输质量

### 兼容性

- 支持 Chrome 90+
- 支持 Firefox 88+
- 支持 Safari 14+
- 支持 Edge 90+

---

## 🐛 常见问题

### Q1：美颜效果不生效？

**解决方案**：
1. 确认已点击"开启"按钮
2. 检查浏览器是否支持
3. 尝试刷新页面重新加入房间
4. 检查摄像头权限

### Q2：美颜效果过度？

**解决方案**：
1. 降低各项参数值
2. 使用"自然"预设
3. 根据实际效果微调

### Q3：访客无法使用美颜？

**解决方案**：
1. 访客可以通过 ZEGO 内置美颜功能
2. 点击设置按钮（齿轮图标）
3. 在设置面板中找到美颜选项

### Q4：美颜导致卡顿？

**解决方案**：
1. 降低美颜参数值
2. 关闭其他占用 CPU 的程序
3. 升级设备硬件
4. 暂时关闭美颜功能

---

## 📊 效果对比

| 参数组合 | 美白 | 磨皮 | 锐化 | 红润 | 效果描述 |
|---------|------|------|------|------|---------|
| 关闭 | 0 | 0 | 0 | 0 | 原始画面 |
| 自然 | 30 | 40 | 20 | 30 | 轻微美化，保持自然 |
| 标准 | 50 | 60 | 30 | 40 | 明显美化，适合大多数场景 |
| 增强 | 70 | 80 | 40 | 60 | 强烈美化，适合特殊需求 |

---

## 🎯 总结

美颜功能为视频面试系统提供了专业的视觉优化能力：

✅ **提升形象**：改善视频画面质量
✅ **增强信心**：让面试者更自信
✅ **专业体验**：提供企业级视频面试体验
✅ **灵活控制**：支持多种场景和需求

**建议**：
- HR 使用自定义美颜控制面板
- 访客使用 ZEGO 内置美颜
- 根据实际场景选择合适的参数
- 定期测试和调整以获得最佳效果

---

**更新日期**：2025-11-07
**版本**：v1.0.0

