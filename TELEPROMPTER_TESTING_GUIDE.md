# 提词器远程控制功能 - 测试指南

## 📋 功能概述

主持人可以远程控制阿姨端的提词器，实现一键推送并开启、分步控制等功能。

---

## 🧪 测试环境准备

### 1. 启动后端服务
```bash
cd backend
npm run start:dev
```

### 2. 启动前端服务
```bash
cd frontend
npm start
```

### 3. 准备测试设备
- **主持人端**: PC浏览器或移动端浏览器
- **阿姨端**: 移动端浏览器（推荐）或PC浏览器

---

## ✅ 测试用例

### 测试用例 1: 一键推送并开启

**步骤:**
1. 主持人登录并创建视频面试房间
2. 阿姨通过邀请链接加入房间（选择"我是阿姨"）
3. 主持人点击"提词器控制"按钮
4. 输入提词内容（例如："欢迎来到面试，请先做个自我介绍"）
5. 确认"推送给"选择了"所有阿姨 (helper)"
6. 点击"🚀 一键推送并开启"按钮

**预期结果:**
- ✅ 主持人看到"🚀 提词器已启动！"成功提示
- ✅ 阿姨端自动显示提词器浮层
- ✅ 提词器显示"主持人控制中"绿色徽章
- ✅ 提词内容自动开始滚动播放
- ✅ 阿姨端的手动控制按钮被隐藏

---

### 测试用例 2: 分步操作 - 推送+显示+播放

**步骤:**
1. 主持人输入提词内容
2. 点击"📤 推送"按钮
3. 点击"👁️ 显示"按钮
4. 点击"▶️ 播放"按钮

**预期结果:**
- ✅ 第1步：内容推送成功，阿姨端暂无变化
- ✅ 第2步：阿姨端显示提词器，但不自动播放
- ✅ 第3步：提词器开始自动滚动

---

### 测试用例 3: 暂停和继续播放

**步骤:**
1. 提词器正在播放中
2. 主持人点击"⏸️ 暂停"按钮
3. 等待3秒
4. 主持人点击"▶️ 播放"按钮

**预期结果:**
- ✅ 第2步：阿姨端提词器停止滚动
- ✅ 第4步：阿姨端提词器继续滚动

---

### 测试用例 4: 关闭提词器

**步骤:**
1. 提词器正在显示中
2. 主持人点击"❌ 关闭提词器"按钮

**预期结果:**
- ✅ 阿姨端提词器浮层消失
- ✅ "主持人控制中"状态被清除

---

### 测试用例 5: 移动端UI适配

**步骤:**
1. 使用移动端浏览器（或调整浏览器窗口宽度 < 768px）
2. 主持人打开提词器控制面板

**预期结果:**
- ✅ 抽屉从底部弹出（而非右侧）
- ✅ 按钮高度增大（48-56px）
- ✅ 字体大小增大（16px+）
- ✅ 触摸操作流畅，无误触
- ✅ 滑块触摸区域足够大

---

### 测试用例 6: 多阿姨同时在线

**步骤:**
1. 3个阿姨同时加入房间
2. 主持人选择"所有阿姨 (helper)"
3. 点击"🚀 一键推送并开启"

**预期结果:**
- ✅ 所有3个阿姨端同时显示提词器
- ✅ 所有阿姨端同步播放
- ✅ 主持人看到"当前房间有 3 位阿姨在线"

---

### 测试用例 7: 角色筛选

**步骤:**
1. 房间内有2个阿姨和1个客户
2. 主持人打开提词器控制面板
3. 查看"推送给"下拉列表

**预期结果:**
- ✅ 下拉列表只显示"所有阿姨 (helper)"和2个阿姨的名字
- ✅ 不显示客户（customer）
- ✅ 推送后只有阿姨收到提词器，客户不受影响

---

### 测试用例 8: 网络断开重连

**步骤:**
1. 提词器正在播放中
2. 阿姨端断开网络（飞行模式）
3. 等待5秒
4. 阿姨端恢复网络

**预期结果:**
- ✅ 重连后提词器状态正确恢复
- ✅ 轮询机制自动恢复
- ✅ 不会重复显示旧消息

---

### 测试用例 9: 房间解散后清理

**步骤:**
1. 提词器正在显示中
2. 主持人点击"🔴 解散房间"

**预期结果:**
- ✅ 阿姨端提词器自动关闭
- ✅ 轮询定时器被清理
- ✅ 阿姨被强制退出房间

---

## 🐛 常见问题排查

### 问题1: 阿姨端没有收到提词器
**排查步骤:**
1. 检查阿姨是否选择了"我是阿姨"身份
2. 检查主持人是否选择了正确的推送对象
3. 打开浏览器控制台，查看是否有错误日志
4. 检查网络请求是否成功（/api/zego/get-teleprompter）

### 问题2: 提词器不自动滚动
**排查步骤:**
1. 检查是否点击了"播放"按钮
2. 检查滚动速度是否设置为0
3. 检查提词内容是否足够长（需要超过显示区域）

### 问题3: 移动端样式异常
**排查步骤:**
1. 检查是否正确引入了 `VideoInterviewMobile.css`
2. 检查浏览器是否支持 CSS Grid 和 Flexbox
3. 清除浏览器缓存后重试

---

## 📊 性能测试

### 测试指标:
- ✅ 推送延迟 < 500ms
- ✅ 轮询间隔 = 2秒
- ✅ 10个阿姨同时在线，无卡顿
- ✅ 长时间运行（1小时+）无内存泄漏

---

## ✨ 测试完成检查清单

- [ ] 一键推送并开启功能正常
- [ ] 分步操作功能正常
- [ ] 暂停/播放功能正常
- [ ] 关闭提词器功能正常
- [ ] 移动端UI适配正常
- [ ] 多阿姨同时在线正常
- [ ] 角色筛选功能正常
- [ ] 网络断开重连正常
- [ ] 房间解散清理正常
- [ ] 性能指标达标

---

## 📝 测试报告模板

```
测试日期: ____________________
测试人员: ____________________
测试环境: PC / 移动端

测试结果:
- 一键推送并开启: ✅ / ❌
- 分步操作: ✅ / ❌
- 暂停/播放: ✅ / ❌
- 关闭提词器: ✅ / ❌
- 移动端适配: ✅ / ❌
- 多用户同步: ✅ / ❌
- 角色筛选: ✅ / ❌

发现的问题:
1. ____________________
2. ____________________

建议改进:
1. ____________________
2. ____________________
```

