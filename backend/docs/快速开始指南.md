# å°ç¨‹åºAPIå¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

### 1. è·å–è®¿é—®ä»¤ç‰Œ

é¦–å…ˆéœ€è¦è·å–è®¿é—®ä»¤ç‰Œï¼ˆTokenï¼‰ç”¨äºAPIè®¤è¯ã€‚

```javascript
// å°ç¨‹åºç™»å½•è·å–token
wx.login({
  success: (res) => {
    // å°†codeå‘é€åˆ°åç«¯æ¢å–token
    wx.request({
      url: 'https://crm.andejiazheng.com/api/auth/miniprogram/login',
      method: 'POST',
      data: {
        code: res.code
      },
      success: (response) => {
        const token = response.data.token;
        // ä¿å­˜tokenä¾›åç»­ä½¿ç”¨
        wx.setStorageSync('token', token);
      }
    });
  }
});
```

### 2. åˆ›å»ºç®€å†

ä½¿ç”¨æœ€å°‘çš„å¿…å¡«å­—æ®µåˆ›å»ºä¸€ä¸ªç®€å†ï¼š

```javascript
const createResume = async () => {
  const token = wx.getStorageSync('token');
  
  const response = await wx.request({
    url: 'https://crm.andejiazheng.com/api/resumes/miniprogram/create',
    method: 'POST',
    header: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json'
    },
    data: {
      // å¿…å¡«å­—æ®µ
      name: 'å¼ ä¸‰',
      phone: '13800138000',
      gender: 'female',
      age: 35,
      jobType: 'yuexin',
      education: 'high',
      
      // å¯é€‰å­—æ®µ - æœˆå«‚æ¡£ä½
      maternityNurseLevel: 'gold',
      
      // å¯é€‰å­—æ®µ - å…¶ä»–ä¿¡æ¯
      expectedSalary: 8000,
      nativePlace: 'æ²³å—çœéƒ‘å·å¸‚',
      selfIntroduction: 'æˆ‘æ˜¯ä¸€åç»éªŒä¸°å¯Œçš„æœˆå«‚...'
    }
  });
  
  if (response.data.success) {
    const resumeId = response.data.data.id;
    console.log('ç®€å†åˆ›å»ºæˆåŠŸï¼ŒID:', resumeId);
    return resumeId;
  }
};
```

### 3. æŸ¥è¯¢ç®€å†

è·å–åˆšåˆ›å»ºçš„ç®€å†è¯¦æƒ…ï¼š

```javascript
const getResume = async (resumeId) => {
  const token = wx.getStorageSync('token');
  
  const response = await wx.request({
    url: `https://crm.andejiazheng.com/api/resumes/miniprogram/${resumeId}`,
    method: 'GET',
    header: {
      'Authorization': `Bearer ${token}`
    }
  });
  
  if (response.data.success) {
    const resume = response.data.data;
    console.log('ç®€å†è¯¦æƒ…:', resume);
    return resume;
  }
};
```

### 4. æ›´æ–°ç®€å†

æ›´æ–°ç®€å†çš„éƒ¨åˆ†ä¿¡æ¯ï¼š

```javascript
const updateResume = async (resumeId) => {
  const token = wx.getStorageSync('token');
  
  const response = await wx.request({
    url: `https://crm.andejiazheng.com/api/resumes/miniprogram/${resumeId}`,
    method: 'PUT',
    header: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json'
    },
    data: {
      // åªéœ€è¦ä¼ é€’è¦æ›´æ–°çš„å­—æ®µ
      expectedSalary: 9000,
      maternityNurseLevel: 'platinum',
      selfIntroduction: 'æ›´æ–°åçš„è‡ªæˆ‘ä»‹ç»...'
    }
  });
  
  if (response.data.success) {
    console.log('ç®€å†æ›´æ–°æˆåŠŸ');
    return response.data.data;
  }
};
```

## ğŸ“ å®Œæ•´ç¤ºä¾‹

### å°ç¨‹åºé¡µé¢å®Œæ•´ä»£ç 

```javascript
// pages/resume/create.js
Page({
  data: {
    formData: {
      name: '',
      phone: '',
      gender: 'female',
      age: 30,
      jobType: 'yuexin',
      education: 'high',
      maternityNurseLevel: 'gold',
      expectedSalary: 8000,
      nativePlace: '',
      selfIntroduction: ''
    }
  },

  // æäº¤è¡¨å•
  async submitForm() {
    const token = wx.getStorageSync('token');
    
    try {
      wx.showLoading({ title: 'æäº¤ä¸­...' });
      
      const response = await wx.request({
        url: 'https://crm.andejiazheng.com/api/resumes/miniprogram/create',
        method: 'POST',
        header: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json'
        },
        data: this.data.formData
      });
      
      wx.hideLoading();
      
      if (response.data.success) {
        wx.showToast({
          title: 'åˆ›å»ºæˆåŠŸ',
          icon: 'success'
        });
        
        // è·³è½¬åˆ°è¯¦æƒ…é¡µ
        wx.navigateTo({
          url: `/pages/resume/detail?id=${response.data.data.id}`
        });
      } else {
        wx.showToast({
          title: response.data.message || 'åˆ›å»ºå¤±è´¥',
          icon: 'none'
        });
      }
    } catch (error) {
      wx.hideLoading();
      wx.showToast({
        title: 'ç½‘ç»œé”™è¯¯',
        icon: 'none'
      });
      console.error('åˆ›å»ºç®€å†å¤±è´¥:', error);
    }
  }
});
```

## ğŸ¯ å¸¸ç”¨åœºæ™¯

### åœºæ™¯1: åˆ›å»ºæœˆå«‚ç®€å†å¹¶è®¾ç½®æ¡£ä½

```javascript
const data = {
  name: 'ææœˆå«‚',
  phone: '13900139000',
  gender: 'female',
  age: 38,
  jobType: 'yuexin',  // æœˆå«‚
  education: 'high',
  maternityNurseLevel: 'platinum',  // é“‚é‡‘æœˆå«‚
  expectedSalary: 12000,
  experienceYears: 8,
  skills: ['chanhou', 'yuying', 'cuiru'],
  selfIntroduction: '8å¹´æœˆå«‚ç»éªŒï¼Œæ“…é•¿äº§åæŠ¤ç†å’Œæ–°ç”Ÿå„¿æŠ¤ç†...'
};
```

### åœºæ™¯2: åˆ›å»ºè‚²å„¿å«‚ç®€å†

```javascript
const data = {
  name: 'ç‹è‚²å„¿',
  phone: '13700137000',
  gender: 'female',
  age: 35,
  jobType: 'zhujia-yuer',  // ä½å®¶è‚²å„¿å«‚
  education: 'middle',
  expectedSalary: 6000,
  experienceYears: 5,
  skills: ['yuying', 'zaojiao'],
  serviceArea: ['åŒ—äº¬å¸‚æœé˜³åŒº', 'åŒ—äº¬å¸‚æµ·æ·€åŒº']
};
```

### åœºæ™¯3: æ›´æ–°æ¥å•çŠ¶æ€

```javascript
// è®¾ç½®ä¸ºå¯æ¥å•
await updateResume(resumeId, {
  orderStatus: 'available'
});

// è®¾ç½®ä¸ºå¿™ç¢Œä¸­
await updateResume(resumeId, {
  orderStatus: 'busy'
});
```

## ğŸ“š ä¸‹ä¸€æ­¥

- æŸ¥çœ‹ [å°ç¨‹åºç®€å†åˆ›å»ºAPIä½¿ç”¨è¯´æ˜](./å°ç¨‹åºç®€å†åˆ›å»ºAPIä½¿ç”¨è¯´æ˜.md) äº†è§£æ‰€æœ‰å­—æ®µè¯¦æƒ…
- æŸ¥çœ‹ [å°ç¨‹åºç®€å†æŸ¥è¯¢æ›´æ–°APIä½¿ç”¨è¯´æ˜](./å°ç¨‹åºç®€å†æŸ¥è¯¢æ›´æ–°APIä½¿ç”¨è¯´æ˜.md) äº†è§£æŸ¥è¯¢å’Œæ›´æ–°çš„è¯¦ç»†ç”¨æ³•
- æŸ¥çœ‹ [æ›´æ–°æ—¥å¿—](./æ›´æ–°æ—¥å¿—.md) äº†è§£æœ€æ–°åŠŸèƒ½

## â“ é‡åˆ°é—®é¢˜ï¼Ÿ

1. æ£€æŸ¥tokenæ˜¯å¦æœ‰æ•ˆ
2. æ£€æŸ¥å¿…å¡«å­—æ®µæ˜¯å¦éƒ½å·²æä¾›
3. æ£€æŸ¥å­—æ®µå€¼æ˜¯å¦ç¬¦åˆè¦æ±‚
4. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ä¸­çš„è¯¦ç»†è¯´æ˜

å¦‚ä»æœ‰é—®é¢˜ï¼Œè¯·è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿã€‚

