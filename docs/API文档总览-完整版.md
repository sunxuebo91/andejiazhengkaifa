# 安得家政CRM系统 - API文档总览（完整版）

## 📚 文档说明

目前API文档分散在多个文件中，本文档提供完整的导航和概览，帮助您快速找到所需的API接口。

---

## 🎯 核心API文档（推荐阅读）

### 1. 【主文档】API规范文档
**文件**: `backend/src/docs/API_SPEC.md` (20KB, 869行)

**内容**:
- ✅ **认证相关**: 登录、获取用户信息、上传头像、登出
- ✅ **简历管理**: CRUD操作、重复检查、公开简历
- ✅ **文件上传**: 身份证、其他文件上传
- ✅ **小程序专用接口**: 创建简历、更新简历、上传文件、删除文件
- ✅ **百度OCR和地图服务**
- ✅ **枚举值说明**: 性别、工种、学历、技能、文件类型、婚姻状况、宗教信仰、来源渠道
- ✅ **文件上传详细说明**: 格式、大小、压缩策略、存储路径、错误处理、最佳实践
- ✅ **完整的简历数据结构**: TypeScript接口定义
- ✅ **API版本历史**

**适用对象**: 所有开发人员

**特点**: 最全面、最权威的API文档

---

### 2. 【小程序专用】小程序API完整文档
**文件**: `backend/docs/小程序API完整文档.md` (40KB, 1856行)

**内容**:
- ✅ **认证授权**: 微信登录、Token管理
- ✅ **简历管理**: 创建、获取、更新简历
- ✅ **文件上传**: 单个上传、批量上传、删除文件
- ✅ **数据字典**: 所有枚举值详解
- ✅ **错误码说明**: 完整的错误处理
- ✅ **最佳实践**: 
  - 文件上传最佳实践（图片预压缩、批量上传、进度显示）
  - 错误处理最佳实践（统一错误处理、重试机制）
  - 数据验证最佳实践（前端验证工具）
  - 性能优化建议（数据缓存、图片懒加载）
  - 安全建议（Token管理、请求拦截器）

**适用对象**: 小程序开发人员

**特点**: 专为小程序设计，包含大量实用代码示例

---

### 3. 【视频面试】小程序视频面试后端API
**文件**: `MINIPROGRAM_BACKEND_API.md` (714行)

**内容**:
- ✅ **房间管理**: 创建房间、加入房间、离开房间、结束房间
- ✅ **房间查询**: 获取房间列表、获取房间详情、检查房间状态
- ✅ **即构Token**: 获取即构Token
- ✅ **简历查询**: 获取简历详情
- ✅ **错误码说明**
- ✅ **使用流程**

**适用对象**: 视频面试功能开发人员

**特点**: 专注于视频面试功能

---

## 📁 专项API文档

### 4. 文件上传完整指南
**文件**: `docs/文件上传完整指南.md` (19KB, 828行)

**内容**:
- ✅ 支持的文件类型详解（10种）
- ✅ 上传方式对比（CRM端 vs 小程序端）
- ✅ 文件限制说明
- ✅ 存储路径规则
- ✅ 完整代码示例（小程序端和CRM端）
- ✅ 常见问题解答（10个）
- ✅ 错误码说明
- ✅ 性能优化建议
- ✅ 安全建议

**适用对象**: 需要实现文件上传功能的开发人员

---

### 5. 客户管理API
**文件**: `docs/小程序端客户管理API文档.md`

**内容**:
- ✅ 创建客户
- ✅ 获取客户列表
- ✅ 获取客户详情
- ✅ 更新客户
- ✅ 删除客户

**适用对象**: 客户管理功能开发人员

---

### 6. 简历管理API（小程序专用）
**文件**: 
- `backend/docs/小程序简历创建API使用说明.md`
- `backend/docs/小程序简历查询更新API使用说明.md`
- `backend/docs/小程序简历API-列表和详情.md`

**内容**:
- ✅ 创建简历
- ✅ 查询简历
- ✅ 更新简历
- ✅ 获取简历列表
- ✅ 获取简历详情

**适用对象**: 简历管理功能开发人员

---

### 7. 面试间管理API
**文件**: `docs/面试间列表API接口文档.md`

**内容**:
- ✅ 获取面试间列表
- ✅ 获取面试间详情
- ✅ 创建面试间
- ✅ 更新面试间状态

**适用对象**: 面试间功能开发人员

---

## 🔍 按功能分类

### 认证授权
- 📄 [API规范文档 - 认证相关](backend/src/docs/API_SPEC.md#认证相关)
- 📄 [小程序API - 认证授权](backend/docs/小程序API完整文档.md#认证授权)

### 简历管理
- 📄 [API规范文档 - 简历管理](backend/src/docs/API_SPEC.md#简历管理)
- 📄 [小程序API - 简历管理](backend/docs/小程序API完整文档.md#简历管理)
- 📄 [小程序简历创建API](backend/docs/小程序简历创建API使用说明.md)
- 📄 [小程序简历查询更新API](backend/docs/小程序简历查询更新API使用说明.md)

### 客户管理
- 📄 [小程序端客户管理API](docs/小程序端客户管理API文档.md)
- 📄 [客户创建API更新说明](docs/小程序客户创建API更新说明.md)

### 文件上传
- 📄 [文件上传完整指南](docs/文件上传完整指南.md) ⭐ 推荐
- 📄 [API规范文档 - 文件上传](backend/src/docs/API_SPEC.md#文件上传)
- 📄 [小程序端文件上传API](docs/小程序端文件上传API使用方法.md)
- 📄 [小程序上传和删除照片](docs/小程序上传和删除照片-完整解决方案.md)

### 视频面试
- 📄 [小程序视频面试后端API](MINIPROGRAM_BACKEND_API.md) ⭐ 推荐
- 📄 [视频面试完整指南](docs/小程序视频面试完整指南.md)
- 📄 [面试间列表API](docs/面试间列表API接口文档.md)

### 数据字典
- 📄 [API规范文档 - 枚举值说明](backend/src/docs/API_SPEC.md#小程序接口枚举值说明)
- 📄 [小程序API - 数据字典](backend/docs/小程序API完整文档.md#数据字典)

---

## 👥 按角色分类

### 后端开发人员
**必读文档**:
1. [API规范文档](backend/src/docs/API_SPEC.md) - 完整的API接口规范
2. [数据库架构](backend/src/docs/DATABASE_SCHEMA.md) - 数据库设计

**参考文档**:
- [更新日志](backend/docs/更新日志.md)
- [快速开始指南](backend/docs/快速开始指南.md)

---

### 前端开发人员（CRM端）
**必读文档**:
1. [API规范文档](backend/src/docs/API_SPEC.md) - 完整的API接口规范
2. [文件上传完整指南](docs/文件上传完整指南.md) - 文件上传实现

**参考文档**:
- [客户管理API](docs/小程序端客户管理API文档.md)
- [简历管理API](backend/src/docs/API_SPEC.md#简历管理)

---

### 小程序开发人员
**必读文档**:
1. [小程序API完整文档](backend/docs/小程序API完整文档.md) ⭐ 最重要
2. [文件上传完整指南](docs/文件上传完整指南.md) - 文件上传实现
3. [小程序视频面试后端API](MINIPROGRAM_BACKEND_API.md) - 视频面试功能

**参考文档**:
- [小程序端文件上传API](docs/小程序端文件上传API使用方法.md)
- [小程序简历创建API](backend/docs/小程序简历创建API使用说明.md)
- [小程序客户管理API](docs/小程序端客户管理API文档.md)
- [小程序视频面试完整指南](docs/小程序视频面试完整指南.md)

---

### 测试人员
**必读文档**:
1. [API规范文档](backend/src/docs/API_SPEC.md) - 了解所有接口
2. [错误码说明](backend/docs/小程序API完整文档.md#错误码说明)

**参考文档**:
- [测试指南](docs/测试指南.md)
- 各功能的测试文档

---

## 📊 API接口统计

### 认证授权（4个接口）
- POST `/api/auth/login` - 登录
- GET `/api/auth/me` - 获取当前用户信息
- POST `/api/auth/upload-avatar` - 上传头像
- POST `/api/auth/logout` - 登出

### 简历管理（8个接口）
- POST `/api/resumes` - 创建简历
- GET `/api/resumes` - 获取简历列表
- GET `/api/resumes/:id` - 获取简历详情
- PUT `/api/resumes/:id` - 更新简历
- DELETE `/api/resumes/:id` - 删除简历
- POST `/api/resumes/check-duplicate` - 检查重复
- POST `/api/resumes/:id/make-public` - 公开简历
- POST `/api/resumes/:id/make-private` - 私有简历

### 小程序简历接口（5个接口）
- POST `/api/miniprogram/resumes` - 创建简历
- GET `/api/miniprogram/resumes/:id` - 获取简历详情
- PUT `/api/miniprogram/resumes/:id` - 更新简历
- POST `/api/miniprogram/resumes/:id/upload-file` - 上传文件
- DELETE `/api/miniprogram/resumes/:id/files/:fileId` - 删除文件

### 客户管理（5个接口）
- POST `/api/customers` - 创建客户
- GET `/api/customers` - 获取客户列表
- GET `/api/customers/:id` - 获取客户详情
- PUT `/api/customers/:id` - 更新客户
- DELETE `/api/customers/:id` - 删除客户

### 视频面试（8个接口）
- POST `/api/interview/create-room` - 创建房间
- POST `/api/interview/join-room` - 加入房间
- POST `/api/interview/leave-room` - 离开房间
- POST `/api/interview/end-room` - 结束房间
- GET `/api/interview/rooms` - 获取房间列表
- GET `/api/interview/rooms/:roomId` - 获取房间详情
- GET `/api/interview/check-room/:roomId` - 检查房间状态
- GET `/api/interview/zego-token` - 获取即构Token

### 文件上传（3个接口）
- POST `/api/upload/id-card` - 上传身份证
- POST `/api/upload/file` - 上传其他文件
- DELETE `/api/upload/file/:fileId` - 删除文件

### 百度服务（2个接口）
- POST `/api/baidu/ocr/id-card` - 身份证OCR识别
- GET `/api/baidu/map/geocode` - 地址解析

**总计**: 约35个核心API接口

---

## 🔄 API版本历史

### v1.3.0 (2026-01-05)
- ✅ 新增5种文件类型支持
- ✅ 完善文件上传文档
- ✅ 新增最佳实践章节
- ✅ 优化错误处理说明

### v1.2.0 (2025-11-20)
- ✅ 新增视频面试API
- ✅ 新增面试间管理功能
- ✅ 优化简历查询接口

### v1.1.0 (2025-10-15)
- ✅ 新增客户管理API
- ✅ 新增文件上传功能
- ✅ 优化认证流程

### v1.0.0 (2025-09-01)
- ✅ 初始版本发布
- ✅ 基础认证和简历管理功能

---

## 🚀 快速开始

### 1. 新手入门
```
第一步: 阅读 docs/API文档索引.md
第二步: 根据角色选择对应的核心文档
第三步: 参考代码示例进行开发
第四步: 遇到问题查看常见问题解答
```

### 2. 开发流程
```
1. 查看API规范文档，了解接口定义
2. 参考最佳实践，编写代码
3. 使用错误处理方案，处理异常
4. 进行测试，确保功能正常
```

### 3. 常用链接
- 📚 [API规范文档](backend/src/docs/API_SPEC.md)
- 📱 [小程序API完整文档](backend/docs/小程序API完整文档.md)
- 📁 [文件上传完整指南](docs/文件上传完整指南.md)
- 🎥 [视频面试API](MINIPROGRAM_BACKEND_API.md)
- 📑 [API文档索引](docs/API文档索引.md)

---

## 💡 文档使用建议

### 如何选择文档？

#### 场景1: 我要开发小程序功能
**推荐阅读顺序**:
1. [小程序API完整文档](backend/docs/小程序API完整文档.md) - 了解所有小程序接口
2. [文件上传完整指南](docs/文件上传完整指南.md) - 如果需要上传文件
3. [小程序视频面试后端API](MINIPROGRAM_BACKEND_API.md) - 如果需要视频面试

#### 场景2: 我要开发CRM端功能
**推荐阅读顺序**:
1. [API规范文档](backend/src/docs/API_SPEC.md) - 了解所有接口
2. [文件上传完整指南](docs/文件上传完整指南.md) - 如果需要上传文件

#### 场景3: 我要实现文件上传
**推荐阅读顺序**:
1. [文件上传完整指南](docs/文件上传完整指南.md) - 最详细的上传指南
2. [小程序端文件上传API](docs/小程序端文件上传API使用方法.md) - 小程序端实现
3. [API规范文档 - 文件上传](backend/src/docs/API_SPEC.md#文件上传) - 接口规范

#### 场景4: 我要实现视频面试
**推荐阅读顺序**:
1. [小程序视频面试后端API](MINIPROGRAM_BACKEND_API.md) - 后端接口
2. [小程序视频面试完整指南](docs/小程序视频面试完整指南.md) - 完整实现
3. [面试间列表API](docs/面试间列表API接口文档.md) - 面试间管理

#### 场景5: 我遇到了错误
**推荐阅读顺序**:
1. [小程序API - 错误码说明](backend/docs/小程序API完整文档.md#错误码说明)
2. [文件上传完整指南 - 常见问题](docs/文件上传完整指南.md#常见问题)
3. 相关功能的文档

---

## 📞 技术支持

### 文档问题反馈
如果您发现文档有以下问题，请及时反馈：
- ❌ 接口描述不清楚
- ❌ 代码示例有错误
- ❌ 缺少重要信息
- ❌ 文档过时

### 联系方式
- 📧 提交Issue到代码仓库
- 💬 联系技术团队
- 📅 在团队会议上提出

---

## 📝 文档维护

### 更新原则
1. **及时性**: API变更后立即更新文档
2. **完整性**: 确保所有接口都有文档
3. **准确性**: 代码示例必须经过测试
4. **易用性**: 提供清晰的使用说明

### 更新流程
```
1. 代码变更 → 2. 更新文档 → 3. 添加版本记录 → 4. 通知团队
```

### 文档规范
- ✅ 使用Markdown格式
- ✅ 包含完整的代码示例
- ✅ 提供清晰的接口说明
- ✅ 添加版本和更新日期
- ✅ 使用统一的格式和术语

---

## 🎯 总结

### 核心文档（必读）
1. **[API规范文档](backend/src/docs/API_SPEC.md)** - 最全面的API文档（869行）
2. **[小程序API完整文档](backend/docs/小程序API完整文档.md)** - 小程序专用（1856行）
3. **[文件上传完整指南](docs/文件上传完整指南.md)** - 文件上传详解（828行）

### 文档特点
- ✅ **完整**: 涵盖所有API接口（35+个）
- ✅ **详细**: 提供完整的代码示例（50+个）
- ✅ **实用**: 包含最佳实践和常见问题
- ✅ **易用**: 按功能和角色分类，快速定位

### 下一步
1. 根据您的角色选择对应的核心文档
2. 参考代码示例进行开发
3. 遇到问题查看常见问题解答
4. 有疑问及时反馈

---

**维护团队**: 安得家政技术团队
**最后更新**: 2026-01-05
**文档版本**: v1.3
**总页数**: 约3500行API文档


