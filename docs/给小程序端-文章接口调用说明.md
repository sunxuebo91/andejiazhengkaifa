# ç»™å°ç¨‹åºç«¯ - æ–‡ç« æ¥å£è°ƒç”¨è¯´æ˜

## ğŸ“± ä¸€å¥è¯æ€»ç»“

**å°ç¨‹åºè°ƒç”¨æ–‡ç« æ¥å£éå¸¸ç®€å•ï¼šä½¿ç”¨ `GET https://crm.andejiazheng.com/api/articles/miniprogram/list?page=1&pageSize=10` è·å–æ–‡ç« åˆ—è¡¨ï¼Œä½¿ç”¨ `GET https://crm.andejiazheng.com/api/articles/miniprogram/:id` è·å–æ–‡ç« è¯¦æƒ…ã€‚ä¸¤ä¸ªæ¥å£éƒ½æ˜¯å…¬å¼€æ¥å£ï¼ˆæ— éœ€ä¼  tokenï¼‰ï¼Œè‡ªåŠ¨åªè¿”å›å·²å‘å¸ƒæ–‡ç« ã€‚åˆ—è¡¨è¿”å›æ–‡ç« æ•°ç»„å’Œåˆ†é¡µä¿¡æ¯ï¼Œè¯¦æƒ…è¿”å›å®Œæ•´å†…å®¹ï¼ˆåŒ…æ‹¬ contentHtml å¯Œæ–‡æœ¬å’Œ imageUrls å›¾ç‰‡æ•°ç»„ï¼‰ã€‚ä½¿ç”¨ `<rich-text nodes="{{article.contentHtml}}">` æ¸²æŸ“å¯Œæ–‡æœ¬ï¼Œä½¿ç”¨ `<image wx:for="{{article.imageUrls}}">` å±•ç¤ºå›¾ç‰‡ã€‚æ”¯æŒæœç´¢ã€åˆ†é¡µã€ä¸Šæ‹‰åŠ è½½æ›´å¤šç­‰åŠŸèƒ½ã€‚**

---

## ğŸ”— æ¥å£åœ°å€

### 1. è·å–æ–‡ç« åˆ—è¡¨
```
GET https://crm.andejiazheng.com/api/articles/miniprogram/list
```
**å‚æ•°**ï¼š
- `page`: é¡µç ï¼ˆé»˜è®¤ 1ï¼‰
- `pageSize`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤ 10ï¼‰
- `keyword`: æœç´¢å…³é”®è¯ï¼ˆå¯é€‰ï¼‰

**æ— éœ€è®¤è¯**ï¼Œè‡ªåŠ¨åªè¿”å›å·²å‘å¸ƒæ–‡ç« 

---

### 2. è·å–æ–‡ç« è¯¦æƒ…
```
GET https://crm.andejiazheng.com/api/articles/miniprogram/:id
```
**å‚æ•°**ï¼š
- `id`: æ–‡ç« IDï¼ˆè·¯å¾„å‚æ•°ï¼‰

**æ— éœ€è®¤è¯**ï¼Œè‡ªåŠ¨åªè¿”å›å·²å‘å¸ƒæ–‡ç« 

---

## ğŸ’» å¿«é€Ÿå¼€å§‹

### å°è£…APIï¼ˆutils/api.jsï¼‰

```javascript
const BASE_URL = 'https://crm.andejiazheng.com/api';

// è·å–æ–‡ç« åˆ—è¡¨
export function getArticleList(params = {}) {
  const { keyword = '', page = 1, pageSize = 10 } = params;
  return new Promise((resolve, reject) => {
    wx.request({
      url: `${BASE_URL}/articles/miniprogram/list`,
      method: 'GET',
      data: { keyword, page, pageSize },
      success(res) {
        if (res.data.success) {
          resolve(res.data.data);
        } else {
          reject(new Error(res.data.message));
        }
      },
      fail: reject
    });
  });
}

// è·å–æ–‡ç« è¯¦æƒ…
export function getArticleDetail(id) {
  return new Promise((resolve, reject) => {
    wx.request({
      url: `${BASE_URL}/articles/miniprogram/${id}`,
      method: 'GET',
      success(res) {
        if (res.data.success) {
          resolve(res.data.data);
        } else {
          reject(new Error(res.data.message));
        }
      },
      fail: reject
    });
  });
}
```

### ä½¿ç”¨ç¤ºä¾‹

```javascript
// è·å–æ–‡ç« åˆ—è¡¨
const result = await getArticleList({ page: 1, pageSize: 10 });
console.log(result.list); // æ–‡ç« æ•°ç»„
console.log(result.total); // æ€»æ•°

// è·å–æ–‡ç« è¯¦æƒ…
const article = await getArticleDetail('6967700ebaf1a7bfe723665c');
console.log(article.title); // æ ‡é¢˜
console.log(article.contentHtml); // å¯Œæ–‡æœ¬HTML
console.log(article.imageUrls); // å›¾ç‰‡æ•°ç»„
```

### æ¸²æŸ“é¡µé¢

```html
<!-- åˆ—è¡¨é¡µ -->
<view wx:for="{{articles}}" wx:key="_id">
  <text>{{item.title}}</text>
  <text>{{item.author}}</text>
</view>

<!-- è¯¦æƒ…é¡µ -->
<view class="article">
  <text class="title">{{article.title}}</text>
  <rich-text nodes="{{article.contentHtml}}"></rich-text>
  <image wx:for="{{article.imageUrls}}" wx:key="index" src="{{item}}" mode="widthFix" />
</view>
```

---

## âœ¨ å…³é”®è¦ç‚¹

1. âœ… **æ— éœ€è®¤è¯**ï¼šä¸éœ€è¦ä¼  Authorization token
2. âœ… **è‡ªåŠ¨ç­›é€‰**ï¼šåªè¿”å›å·²å‘å¸ƒæ–‡ç« ï¼ˆstatus='published'ï¼‰
3. âœ… **å¯Œæ–‡æœ¬æ¸²æŸ“**ï¼šä½¿ç”¨ `<rich-text>` ç»„ä»¶
4. âœ… **å›¾ç‰‡å±•ç¤º**ï¼šå¾ªç¯ `imageUrls` æ•°ç»„
5. âœ… **åˆ†é¡µæ”¯æŒ**ï¼šé€šè¿‡ page å‚æ•°å®ç°
6. âœ… **æœç´¢åŠŸèƒ½**ï¼šé€šè¿‡ keyword å‚æ•°å®ç°

---

## ğŸ“š å®Œæ•´æ–‡æ¡£

è¯¦ç»†çš„APIæ–‡æ¡£ã€å®Œæ•´ä»£ç ç¤ºä¾‹è¯·æŸ¥çœ‹ï¼š
**`backend/docs/å°ç¨‹åºAPIå®Œæ•´æ–‡æ¡£.md`**ï¼ˆç¬¬ 184-551 è¡Œï¼‰

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜è¯·è”ç³»åç«¯å¼€å‘å›¢é˜Ÿã€‚

**çŠ¶æ€**ï¼šâœ… å·²ä¸Šçº¿å¯ç”¨  
**æœ€åæ›´æ–°**ï¼š2026-01-15  
**ç»´æŠ¤å›¢é˜Ÿ**ï¼šå®‰å¾—å®¶æ”¿æŠ€æœ¯å›¢é˜Ÿ

