# é˜¿å§¨è‡ªåŠ©æ³¨å†Œæ¥å£ - å¿«é€Ÿå‚è€ƒ

## ğŸ“ æ¥å£ä¿¡æ¯

**æ¥å£è·¯å¾„**: `POST /api/resumes/miniprogram/self-register`  
**è®¤è¯æ–¹å¼**: æ— éœ€JWTè®¤è¯ï¼ˆå…¬å¼€æ¥å£ï¼‰  
**Content-Type**: `application/json`

---

## ğŸ“ è¯·æ±‚ç¤ºä¾‹

### æœ€å°è¯·æ±‚ï¼ˆä»…å¿…å¡«å­—æ®µï¼‰

```bash
curl -X POST http://localhost:3001/api/resumes/miniprogram/self-register \
  -H "Content-Type: application/json" \
  -d '{
    "name": "å¼ ä¸‰",
    "phone": "13800138000",
    "age": 35,
    "gender": "female",
    "jobType": "yuexin"
  }'
```

### å®Œæ•´è¯·æ±‚ï¼ˆåŒ…å«æ‰€æœ‰å­—æ®µï¼‰

```bash
curl -X POST http://localhost:3001/api/resumes/miniprogram/self-register \
  -H "Content-Type: application/json" \
  -d '{
    "name": "å¼ ä¸‰",
    "phone": "13800138000",
    "age": 35,
    "gender": "female",
    "jobType": "yuexin",
    "idNumber": "110101198901011234",
    "birthDate": "1989-01-01",
    "ethnicity": "æ±‰æ—",
    "nativePlace": "åŒ—äº¬å¸‚",
    "hukouAddress": "åŒ—äº¬å¸‚æœé˜³åŒºxxx",
    "education": "middle",
    "expectedSalary": 8000,
    "experienceYears": 3,
    "skills": ["muying", "cuiru"],
    "workExperiences": []
  }'
```

---

## âœ… æˆåŠŸå“åº”ï¼ˆ201ï¼‰

```json
{
  "success": true,
  "message": "ç®€å†åˆ›å»ºæˆåŠŸ",
  "data": {
    "_id": "68f1afa3dfd52f5da9531d56",
    "id": "68f1afa3dfd52f5da9531d56",
    "name": "å¼ ä¸‰",
    "phone": "13800138000",
    "status": "draft",
    "leadSource": "self-registration",
    "createdAt": "2025-10-17T02:53:23.024Z"
  }
}
```

---

## âŒ é”™è¯¯å“åº”

### 400 - æ•°æ®éªŒè¯å¤±è´¥

```json
{
  "success": false,
  "message": "æ•°æ®éªŒè¯å¤±è´¥",
  "error": "VALIDATION_ERROR",
  "details": [
    {
      "field": "phone",
      "message": "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®"
    }
  ]
}
```

### 409 - æ‰‹æœºå·å·²å­˜åœ¨

```json
{
  "success": false,
  "message": "è¯¥æ‰‹æœºå·å·²æ³¨å†Œ",
  "error": "DUPLICATE_ERROR",
  "status": 409
}
```

### 409 - èº«ä»½è¯å·å·²å­˜åœ¨

```json
{
  "success": false,
  "message": "è¯¥èº«ä»½è¯å·å·²æ³¨å†Œ",
  "error": "DUPLICATE_ID_NUMBER",
  "status": 409
}
```

### 429 - è¯·æ±‚è¿‡äºé¢‘ç¹

```json
{
  "success": false,
  "message": "æäº¤è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•",
  "error": "RATE_LIMIT_EXCEEDED",
  "status": 429
}
```

---

## ğŸ“‹ å­—æ®µè¯´æ˜

### å¿…å¡«å­—æ®µ

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| name | string | å§“åï¼ˆ2-20å­—ç¬¦ï¼‰ | "å¼ ä¸‰" |
| phone | string | æ‰‹æœºå·ï¼ˆ11ä½ï¼‰ | "13800138000" |
| age | number | å¹´é¾„ï¼ˆ18-65ï¼‰ | 35 |
| gender | string | æ€§åˆ«ï¼ˆmale/femaleï¼‰ | "female" |
| jobType | string | å·¥ç§ | "yuexin" |

### å¯é€‰å­—æ®µ

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|--------|
| idNumber | string | èº«ä»½è¯å·ï¼ˆ18ä½ï¼‰ | - |
| birthDate | string | å‡ºç”Ÿæ—¥æœŸ | - |
| ethnicity | string | æ°‘æ— | - |
| nativePlace | string | ç±è´¯ | - |
| hukouAddress | string | æˆ·å£åœ°å€ | - |
| education | string | å­¦å† | "middle" |
| expectedSalary | number | æœŸæœ›è–ªèµ„ | 0 |
| experienceYears | number | å·¥ä½œå¹´é™ | 0 |
| skills | array | æŠ€èƒ½åˆ—è¡¨ | [] |
| workExperiences | array | å·¥ä½œç»å† | [] |

### è‡ªåŠ¨è®¾ç½®å­—æ®µï¼ˆä¸å¯ä¿®æ”¹ï¼‰

| å­—æ®µ | å€¼ | è¯´æ˜ |
|------|-----|------|
| leadSource | "self-registration" | æ¥æºæ ‡è®° |
| status | "draft" | çŠ¶æ€ |

---

## ğŸ”’ é™æµè§„åˆ™

- **åŒä¸€IP**: æ¯åˆ†é’Ÿæœ€å¤š3æ¬¡è¯·æ±‚
- **è¶…å‡ºé™åˆ¶**: è¿”å›429é”™è¯¯ï¼Œéœ€ç­‰å¾…1åˆ†é’Ÿåé‡è¯•

---

## ğŸ§ª æµ‹è¯•å‘½ä»¤

### è¿è¡Œå®Œæ•´æµ‹è¯•

```bash
node test-self-register-api.js
```

### æµ‹è¯•èº«ä»½è¯å·é‡å¤

```bash
node test-idnumber-duplicate.js
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: è¿”å›404é”™è¯¯

**åŸå› **: åç«¯æœåŠ¡æœªå¯åŠ¨æˆ–ç«¯å£ä¸æ­£ç¡®  
**è§£å†³**: ç¡®ä¿åç«¯è¿è¡Œåœ¨ `http://localhost:3001`

```bash
cd backend
npm run start:dev
```

### Q2: è¿”å›429é”™è¯¯ï¼ˆé™æµï¼‰

**åŸå› **: è¯·æ±‚è¿‡äºé¢‘ç¹  
**è§£å†³**: ç­‰å¾…1åˆ†é’Ÿåé‡è¯•

### Q3: è¿”å›400é”™è¯¯ï¼ˆæ•°æ®éªŒè¯å¤±è´¥ï¼‰

**åŸå› **: è¯·æ±‚æ•°æ®æ ¼å¼ä¸æ­£ç¡®  
**è§£å†³**: æ£€æŸ¥å¿…å¡«å­—æ®µå’Œæ•°æ®æ ¼å¼

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿã€‚

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é˜¿å§¨è‡ªåŠ©æ³¨å†Œæ¥å£å®ç°è¯´æ˜.md](./é˜¿å§¨è‡ªåŠ©æ³¨å†Œæ¥å£å®ç°è¯´æ˜.md) - è¯¦ç»†å®ç°æ–‡æ¡£
- [å®¢æˆ·æ‰¹é‡å¯¼å…¥-è§„åˆ’æ€»ç»“.md](./å®¢æˆ·æ‰¹é‡å¯¼å…¥-è§„åˆ’æ€»ç»“.md) - åŸå§‹éœ€æ±‚

