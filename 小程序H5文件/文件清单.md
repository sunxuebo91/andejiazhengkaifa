# 文件清单

## 📦 打包内容

本部署包包含以下文件：

```
小程序H5文件/
├── README.md                           # 部署说明（必读）
├── 快速开始.md                         # 5分钟快速部署指南
├── 部署配置说明.md                     # 详细配置说明
├── 文件清单.md                         # 本文件
├── video-interview-host.html          # HR端视频面试页面（必需）
├── video-interview.html               # 访客端视频面试页面（必需）
└── ZegoExpressWebRTC-standalone.js    # ZEGO Web SDK（必需）
```

---

## 📄 文件说明

### 1. video-interview-host.html

**用途**：HR端（主持人）视频面试页面

**功能**：
- ✅ 创建面试间
- ✅ 邀请用户
- ✅ 视频通话（支持3-6人）
- ✅ 麦克风/摄像头控制
- ✅ 离开房间
- ✅ 面试计时

**大小**：约 35 KB

**访问方式**：
- 小程序 WebView：`https://yourdomain.com/h5/video-interview-host.html`
- 浏览器直接访问：`https://yourdomain.com/h5/video-interview-host.html`

**配置项**（在文件中）：
```javascript
const appID = 1279160453;                           // ZEGO AppID
const server = 'wss://webliveroom-api.zego.im/ws';  // ZEGO 服务器
const serverSecret = 'e18cc600e2939d412c48f152e157f01d';  // ZEGO ServerSecret
```

**修改位置**：第 590-592 行

---

### 2. video-interview.html

**用途**：访客端（求职者）视频面试页面

**功能**：
- ✅ 加入面试间
- ✅ 选择身份（客户/阿姨）
- ✅ 输入姓名
- ✅ 视频通话
- ✅ 麦克风/摄像头控制
- ✅ 离开房间
- ✅ 面试计时

**大小**：约 30 KB

**访问方式**：
- 小程序 WebView：`https://yourdomain.com/h5/video-interview.html?room=xxx`
- 浏览器直接访问：`https://yourdomain.com/h5/video-interview.html?room=xxx`

**URL 参数**：
- `room`：房间号（必需）

**配置项**（在文件中）：
```javascript
const appID = 1279160453;                           // ZEGO AppID
const server = 'wss://webliveroom-api.zego.im/ws';  // ZEGO 服务器
const serverSecret = 'e18cc600e2939d412c48f152e157f01d';  // ZEGO ServerSecret
```

**修改位置**：第 473-476 行

---

### 3. ZegoExpressWebRTC-standalone.js

**用途**：ZEGO Web SDK（独立打包版本）

**版本**：v3.11.0

**功能**：
- 音视频通话
- 推流/拉流
- 房间管理
- 用户管理
- Token 验证

**大小**：约 2.5 MB

**特点**：
- ✅ 独立打包，包含所有依赖
- ✅ 无需额外加载其他文件
- ✅ 支持所有主流浏览器
- ✅ 支持移动端浏览器

**浏览器兼容性**：
- Chrome 58+
- Firefox 56+
- Safari 11+
- Edge 79+
- 微信内置浏览器
- 小程序 WebView

---

## 🔧 配置说明

### ZEGO 配置

当前使用的 ZEGO 配置：

```javascript
AppID: 1279160453
ServerSecret: e18cc600e2939d412c48f152e157f01d
Server: wss://webliveroom-api.zego.im/ws
```

**如果需要更换 ZEGO 账号**：

1. 登录 ZEGO 控制台：https://console.zego.im/
2. 创建项目并获取 AppID 和 ServerSecret
3. 修改两个 HTML 文件中的配置：
   - `video-interview-host.html` 第 590-592 行
   - `video-interview.html` 第 473-476 行

---

### 域名配置

需要在以下位置配置域名：

#### 1. 服务器配置（Nginx/Apache）

**Nginx 示例**：
```nginx
location /h5/ {
    alias /var/www/html/h5/;
    index video-interview-host.html;
}
```

**Apache 示例**：
```apache
Alias /h5 /var/www/html/h5
<Directory /var/www/html/h5>
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
</Directory>
```

#### 2. 小程序配置

**文件**：`miniprogram/pages/video-interview-webview/index.js`

**修改位置**：第 17 行

```javascript
const h5Domain = 'https://api.yourdomain.com/h5';  // 改成你的域名
```

#### 3. 小程序后台配置

**位置**：小程序后台 → 开发 → 开发管理 → 开发设置 → 业务域名

**添加域名**：`api.yourdomain.com` 或 `interview.yourdomain.com`

---

## 📊 文件大小统计

| 文件名 | 大小 | 类型 | 是否必需 |
|--------|------|------|----------|
| video-interview-host.html | ~35 KB | HTML | ✅ 必需 |
| video-interview.html | ~30 KB | HTML | ✅ 必需 |
| ZegoExpressWebRTC-standalone.js | ~2.5 MB | JavaScript | ✅ 必需 |
| README.md | ~15 KB | Markdown | 📖 文档 |
| 快速开始.md | ~10 KB | Markdown | 📖 文档 |
| 部署配置说明.md | ~20 KB | Markdown | 📖 文档 |
| 文件清单.md | ~8 KB | Markdown | 📖 文档 |

**总大小**：约 2.6 MB

---

## 🔒 安全说明

### 1. HTTPS 必需

所有文件必须通过 HTTPS 访问，原因：
- 浏览器安全策略要求
- 摄像头和麦克风权限需要 HTTPS
- 小程序 WebView 要求 HTTPS

### 2. ServerSecret 保护

**重要**：ServerSecret 是敏感信息，但在 Web 端无法完全隐藏。

**建议**：
- 定期更换 ServerSecret
- 监控 ZEGO 使用量
- 设置使用限额

**更安全的方案**（可选）：
- 使用云函数生成 Token
- 不在前端暴露 ServerSecret

### 3. 跨域配置

如果需要跨域访问，添加以下配置：

**Nginx**：
```nginx
add_header Access-Control-Allow-Origin *;
add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';
```

**Apache**：
```apache
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
```

---

## 📱 浏览器兼容性

### 桌面浏览器

| 浏览器 | 最低版本 | 推荐版本 | 状态 |
|--------|----------|----------|------|
| Chrome | 58 | 最新版 | ✅ 完全支持 |
| Firefox | 56 | 最新版 | ✅ 完全支持 |
| Safari | 11 | 最新版 | ✅ 完全支持 |
| Edge | 79 | 最新版 | ✅ 完全支持 |
| Opera | 45 | 最新版 | ✅ 完全支持 |

### 移动浏览器

| 浏览器 | 最低版本 | 推荐版本 | 状态 |
|--------|----------|----------|------|
| iOS Safari | 11 | 最新版 | ✅ 完全支持 |
| Android Chrome | 58 | 最新版 | ✅ 完全支持 |
| 微信内置浏览器 | - | 最新版 | ✅ 完全支持 |
| 小程序 WebView | - | 最新版 | ✅ 完全支持 |

### 不支持的浏览器

- ❌ IE 11 及以下
- ❌ 旧版 Android 浏览器（Android 4.x）

---

## 🔄 版本历史

### v2.1 (2025-11-11)

**更新内容**：
- ✅ 修复 HR 端 Token 生成问题
- ✅ 统一访客端和 HR 端配置
- ✅ 添加 SDK 加载等待机制
- ✅ 优化调试日志输出
- ✅ 添加初始化延迟保护

**文件变更**：
- `video-interview-host.html`：添加 Token 生成函数、SDK 初始化优化
- `video-interview.html`：无变更

---

### v2.0 (2025-11-10)

**更新内容**：
- ✅ 完成 HR 端和访客端 H5 页面
- ✅ 集成 ZEGO Web SDK v3.11.0
- ✅ 支持多人视频通话（3-6人）
- ✅ 支持小程序 WebView 集成
- ✅ 支持浏览器直接访问

**文件变更**：
- 新增 `video-interview-host.html`
- 新增 `video-interview.html`
- 新增 `ZegoExpressWebRTC-standalone.js`

---

## 📞 技术支持

### 官方文档

- **ZEGO 文档**：https://doc-zh.zego.im/
- **微信小程序文档**：https://developers.weixin.qq.com/miniprogram/dev/

### 常见问题

请查看 `README.md` 中的"常见问题"章节。

### 联系方式

如有问题，请：
1. 查看文档
2. 检查配置
3. 查看浏览器控制台错误
4. 联系技术支持

---

## ✅ 部署检查清单

部署前请确认：

- [ ] 已上传所有 3 个必需文件
- [ ] 服务器已配置 HTTPS
- [ ] Nginx/Apache 配置正确
- [ ] 域名已解析到服务器
- [ ] SSL 证书有效
- [ ] 小程序后台已配置业务域名
- [ ] 校验文件已上传并验证成功
- [ ] 小程序代码已修改域名
- [ ] 已测试 HR 端页面访问
- [ ] 已测试访客端页面访问
- [ ] 已测试小程序集成
- [ ] 已测试视频通话功能

---

## 🎉 部署完成

恭喜！你已经成功将视频面试功能迁移到自己的服务器。

**下一步**：
1. 测试完整的面试流程
2. 优化页面性能
3. 监控使用情况
4. 根据需求添加新功能

**享受你的视频面试系统！** 🚀

